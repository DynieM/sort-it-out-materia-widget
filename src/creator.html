<!DOCTYPE HTML>
<html>
	<head>
		<title>Sort It Out! Creator</title>
		<meta charset='utf-8' />

		<!-- STYLESHEETS -->
		<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/angular_material/1.1.10/angular-material.min.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel='stylesheet' type='text/css' href='creator.css'>

		<!-- REQUIRED MATERIA JAVASCRIPT -->
		<script src="materia.creatorcore.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>


		<!-- ANGULAR DEPENDENCIES -->
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-animate.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-aria.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-messages.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.2/angular-sanitize.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/angular_material/1.1.10/angular-material.min.js"></script>

		<!-- MAIN CREATOR SCRIPT -->
		<script src="creator.js"></script>
	</head>
	<body>

	<body ng-app="SortItOutCreator">

		<md-content id="container" ng-controller="SortItOutController">

			<md-toolbar md-theme="toolbar-dark" id="creator-header">
				<div class="md-toolbar-tools">
					<md-input-container class="md-block widget-title" flex>
						<label id="widget-title-label">Widget Name</label>
						<input ng-model="title">
					</md-input-container>
				</div>
			</md-toolbar>

			<div layout="column" id="content" ng-show="ready">
				<div id="card-container">
					<md-card class="md-whiteframe-3dp bucket" ng-repeat="(bucketIndex, bucket) in buckets">
						<md-toolbar class="bucket-header">
							<div class="md-toolbar-tools">
								<h3>{{bucket.name}}</h3>
								<span flex></span>
								<md-button class="bucket-edit" ng-click="showEditDialog($event, bucketIndex)">
									Edit
								</button>
							</div>
						</md-toolbar>
						<div class="bucket-items" layout="column">
							<form name="bucketItemsForm" autocomplete="off" ng-repeat="item in bucket.items">
								<md-input-container class="md-inline-block">
									<label>Item {{$index + 1}}</label>
									<input type="text" ng-model="item.text" name="item" required spellcheck="true" autocomplete="off">
									<div ng-messages="bucketItemsForm.item.$error">
										<div ng-message="required">Item name is required.</div>
									</div>
								</md-input-container>

								<md-button class="option-controls" ng-click="removeItem(bucketIndex, $index)" tabindex="-1" ng-show="bucket.items.length > 1">
									<md-tooltip md-direction="below">Remove Option</md-tooltip>
									<i class="material-icons">&#xE15D;</i>
								</md-button>
							</form>
							<md-button class="md-accent md-raised toggle-option" ng-click="addItem(bucketIndex)" ng-disabled="!validBucket(bucketIndex)">
								Add Item
							</md-button>
						</div>
					</md-card>
					<div layout layout-align="center center">
						<md-button id="add-bucket" class="md-accent md-raised toggle-option" ng-click="showAddDialog($event)" ng-disabled="!canAddBucket()">
							Add Bucket
						</md-button>
					</div>
				</div>
			</div>

			<!-- Bucket Edit Dialog -->
			<div style="visibility: hidden">
				<div class="md-dialog-container" id="edit-dialog-container">
					<md-dialog id="edit-dialog">
						<md-dialog-content>
							<div class="md-dialog-content">
								<form name="bucketNameForm" autocomplete="off">
									<md-input-container class="md-block">
										<label>Bucket Name</label>
										<input type="text" ng-model="editBucketName" name="editBucketName" required spellcheck="true" autocomplete="off">
										<div ng-messages="bucketItemsForm.editBucketName.$error">
											<div ng-message="required">Name is required.</div>
										</div>
									</md-input-container>

									<md-button id="edit-bucket-save" class="md-accent md-raised toggle-option" ng-click="updateName()" ng-disabled="!editBucketName.length">
										Save
									</md-button>

									<md-button id="edit-bucket-delete" class="md-raised toggle-option" ng-click="showConfirmDelete($event)" ng-if="canDeleteBucket()">
										Delete Bucket
									</md-button>
								</form>
							</div>
						</md-dialog-content>
					</md-dialog>
				</div>
			</div>

			<!-- Create Bucket Dialog -->
			<div style="visibility: hidden">
				<div class="md-dialog-container" id="create-dialog-container">
					<md-dialog id="create-dialog">
						<md-dialog-content>
							<div class="md-dialog-content">
								<form name="bucketNameForm" autocomplete="off">
									<md-input-container class="md-block">
										<label>Bucket Name</label>
										<input type="text" ng-model="createBucketName" name="createBucketName" required spellcheck="true" autocomplete="off">
										<div ng-messages="bucketItemsForm.createBucketName.$error">
											<div ng-message="required">Name is required.</div>
										</div>
									</md-input-container>

									<md-button id="create-bucket-save" class="md-accent md-raised toggle-option" ng-click="createBucket()" ng-disabled="!createBucketName.length">
										Create
									</md-button>

									<md-button id="create-bucket-cancel" class="md-raised toggle-option" ng-click="hideDialog()">
										Cancel
									</md-button>
								</form>
							</div>
						</md-dialog-content>
					</md-dialog>
				</div>
			</div>

		</md-content>
	</body>
</html>
